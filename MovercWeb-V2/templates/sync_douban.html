{% extends "base.html" %}

{% block title %}与个人豆瓣同步{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>与个人豆瓣同步</h2>
    <p class="text-muted">在此处输入你的豆瓣用户 ID 与 Cookie（仅用于后续自动化任务）。请妥善保管你的 Cookie，不要在不可信环境中提交。</p>

    <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <div class="form-group">
            <label for="douban_id">豆瓣用户 ID</label>
            <input type="text" class="form-control" id="douban_id" name="douban_id" placeholder="例如：12345678" value="{{ douban_id or '' }}" required>
            <small class="form-text text-muted">通常是你豆瓣个人主页链接中最后的数字 ID。</small>
        </div>
        <div class="form-group">
            <label for="douban_cookie">豆瓣 Cookie</label>
            <textarea class="form-control" id="douban_cookie" name="douban_cookie" rows="6" placeholder="请粘贴你的 Cookie" required>{{ cookie or '' }}</textarea>
            <small class="form-text text-muted">示例: _vwo_uuid_v2=...; dbcl2="..."; 如果不清楚，请参考豆瓣 Cookie 的获取方式。</small>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-primary">保存并继续</button>
            <a href="{{ url_for('profile') }}" class="btn btn-secondary">取消</a>
        </div>
    </form>

    <div class="mt-3">
        <div class="alert alert-warning">提示：目前表单内容仅保存在会话（session）中，用于后续操作。如需持久保存，请告知，我可以把数据存入用户模型并添加数据库迁移支持。</div>
    </div>
</div>
{% endblock %}
